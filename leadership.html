<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Co-Curricular & Leadership Activities — Lubna Zahan Lamia</title>
  <link rel="stylesheet" href="styles.css" />

  <style>
    .slideshow-container {
      max-width: 700px;
      position: relative;
      margin: 40px auto;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      background: var(--panel);
    }
    .slide { display: none; width: 100%; }
    .slide img { width: 100%; height: auto; display: block; }

    .prev, .next {
      cursor: pointer;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      padding: 10px 14px;
      color: #fff;
      font-weight: bold;
      font-size: 18px;
      user-select: none;
      background: rgba(0,0,0,0.4);
      border-radius: 8px;
      transition: background .25s ease;
    }
    .prev { left: 8px; }
    .next { right: 8px; }
    .prev:hover, .next:hover { background: rgba(0,0,0,0.7); }

    .fade { animation: fadeEffect .45s ease-in; }
    @keyframes fadeEffect { from {opacity: .4} to {opacity: 1} }
  </style>

  <!-- ⚡ Ultra-early detector: picks the right extension for extra1.* and paints it ASAP -->
  <script>
    (function() {
      const exts = ["jpg","jpeg","png","JPG","JPEG","PNG"];
      const prefix = "extra";
      const idx = 1;
      let picked = null;

      function setFirst(url, ext) {
        picked = ext;
        // Preload the exact file we’ll show (helps paint faster)
        const link = document.createElement('link');
        link.rel = 'preload';
        link.as  = 'image';
        link.href = url;
        document.head.appendChild(link);

        // Put it into the already-in-DOM <img>
        const img = document.getElementById('first-slide-img');
        if (img && !img.src) {
          img.src = url;
          img.setAttribute('fetchpriority', 'high');
          img.loading = 'eager';
        }
        // Remember chosen ext on the container for later preloads
        const cont = document.getElementById('activities-slideshow');
        if (cont) cont.dataset.ext1 = ext;
      }

      function test(i) {
        if (i >= exts.length) return; // give up; slideshow will still detect later
        const ext = exts[i];
        const url = `${prefix}${idx}.${ext}`;
        const probe = new Image();
        probe.onload = function(){ setFirst(url, ext); };
        probe.onerror = function(){ test(i+1); };
        probe.src = url;
      }

      // Start detection immediately, before DOMContentLoaded
      test(0);
    })();
  </script>
</head>
<body>
  <nav class="navbar">
    <div class="container nav-inner">
      <div class="logo"><a href="index.html">LZL</a></div>
      <ul class="nav-links">
        <li><a href="index.html#about">About</a></li>
        <li><a href="index.html#interests">Research Interest</a></li>
        <li><a href="index.html#education">Education</a></li>
        <li><a href="index.html#publications">Publications</a></li>
        <li><a href="index.html#awards">Awards</a></li>
        <li><a class="contact-btn" href="index.html#contact">Contact</a></li>
      </ul>
    </div>
  </nav>

  <header class="page-hero">
    <div class="container">
      <h1>Co-Curricular & Leadership Activities</h1>
      <p>
        I have taken part in several departmental and university events that helped me develop
        teamwork, coordination, and communication skills alongside my academic studies.
      </p>
      <p><a class="inline-btn" href="index.html">← Back to Home</a></p>
    </div>
    <div class="mast-bg" aria-hidden="true"></div>
  </header>

  <main class="container page-content">
    <ul class="about-highlights">
      <li>
        <strong>Event Organization — Department of Computer Science & Engineering, University of Dhaka</strong><br>
        Assisted in planning and coordinating departmental programs such as <em>Graduation Week 2024</em>,
        supporting scheduling, registration, and on-site arrangements.
      </li>

      <li>
        <strong>Anchoring & Hosting — University of Dhaka</strong><br>
        Served as host/moderator for events including <em>Freshers’ Reception, Movie Night, Graduation Ceremony,</em>
        and the <em>CAIL LLM Workshop</em>, facilitating sessions and maintaining event flow.
      </li>
    </ul>

    <!-- Slideshow -->
    <div class="slideshow-container" id="activities-slideshow" data-prefix="extra" data-count="3">
      <!-- ✅ First slide is real HTML so it can paint immediately -->
      <div class="slide fade" style="display:block">
        <img id="first-slide-img" alt="extra 1"><!-- src set in <head> detector -->
      </div>

      <!-- Nav buttons -->
      <a class="prev" aria-label="Previous image" onclick="changeSlide(-1)">&#10094;</a>
      <a class="next" aria-label="Next image" onclick="changeSlide(1)">&#10095;</a>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <small>© <span id="year"></span> Lubna Zahan Lamia</small>
    </div>
  </footer>

  <script>
    // ---------- Preload & build remaining slides (2..N) ----------
    const EXT_CANDIDATES = ["jpg","jpeg","png","JPG","JPEG","PNG"];
    const indexExtMap = new Map(); // id -> Map(index->ext)

    function buildUrl(prefix, idx, ext) { return `${prefix}${idx}.${ext}`; }
    function tryImage(url) {
      return new Promise(res => {
        const img = new Image();
        img.onload = () => res(true);
        img.onerror = () => res(false);
        img.src = url;
      });
    }

    async function detectExtForIndex(containerId, prefix, idx) {
      const per = indexExtMap.get(containerId) || new Map();
      if (per.has(idx)) return per.get(idx);

      // Use early-picked ext for #1 if available
      if (idx === 1) {
        const cont = document.getElementById(containerId);
        const preset = cont?.dataset?.ext1;
        if (preset) {
          per.set(1, preset);
          indexExtMap.set(containerId, per);
          return preset;
        }
      }

      for (const ext of EXT_CANDIDATES) {
        if (await tryImage(buildUrl(prefix, idx, ext))) {
          per.set(idx, ext);
          indexExtMap.set(containerId, per);
          return ext;
        }
      }
      per.set(idx, null);
      indexExtMap.set(containerId, per);
      return null;
    }

    async function preloadAllPerIndex(containerId, prefix, count) {
      const head = document.head;
      const exts = await Promise.all(
        Array.from({length: count}, (_, k) => detectExtForIndex(containerId, prefix, k+1))
      );
      exts.forEach((ext, i) => {
        if (!ext) return;
        const url = buildUrl(prefix, i+1, ext);
        const link = document.createElement('link');
        link.rel = 'preload';
        link.as  = 'image';
        link.href = url;
        head.appendChild(link);
        const img = new Image();
        img.decoding = 'async';
        img.src = url;
      });
      return exts;
    }

    // ---------------- Slideshow state ----------------
    let slideIndex = 1;

    function showSlides(n) {
      const container = document.getElementById("activities-slideshow");
      const slides = container.getElementsByClassName("slide");
      const total = slides.length;
      if (total === 0) return;

      if (n > total) slideIndex = 1;
      if (n < 1) slideIndex = total;

      for (let i = 0; i < total; i++) slides[i].style.display = "none";
      slides[slideIndex - 1].style.display = "block";
    }
    function changeSlide(n) { showSlides(slideIndex += n); }

    // -------------- Build remaining slides --------------
    async function initSlideshow() {
      const container = document.getElementById("activities-slideshow");
      const prefix = container.dataset.prefix;
      const count  = parseInt(container.dataset.count, 10);
      const id     = container.id;

      // Preload everything (2..N will resolve here; #1 was chosen in <head>)
      const exts = await preloadAllPerIndex(id, prefix, count);

      // Build slides for indices 2..N
      for (let i = 2; i <= count; i++) {
        const ext = exts[i-1];
        if (!ext) continue;
        const slide = document.createElement("div");
        slide.className = "slide fade";
        const img = document.createElement("img");
        img.alt = `${prefix} ${i}`;
        img.src = buildUrl(prefix, i, ext);
        img.decoding = "async";
        slide.appendChild(img);
        container.insertBefore(slide, container.querySelector(".prev"));
      }

      // Ensure we’re showing the first slide already in DOM
      slideIndex = 1;
      showSlides(slideIndex);
    }

    // Boot
    window.addEventListener("DOMContentLoaded", initSlideshow);

    // Footer year
    window.addEventListener("load", () => {
      const y = document.getElementById("year");
      if (y) y.textContent = new Date().getFullYear();
    });
  </script>
</body>
</html>
